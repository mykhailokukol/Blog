<!DOCTYPE html>
{% load staticfiles %}
<html>
<head>
	<meta charset="utf-8">
	<title>Welcome Page</title>
	{% include 'blocks/links.html' %}
	<link rel="stylesheet" href="{% static 'css/IndexApp/index.css' %}">
</head>
<body>
{% include 'blocks/header.html' %}
	<div class="content">
		<div class="posts-content">
			<div class="posts-list">
				{% for post in posts %}
					<div class="post">
						<h3>{{ post.title }}</h3>
						<p>{{ post.text }}</p>
						<!-- TODO: –ü–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏–µ –ª–∞–π–∫–Ω—É–≤—à–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ –≤–∏–¥–µ —Å—Å—ã–ª–æ–∫ –Ω–∞ –∏—Ö –ø—Ä–æ—Ñ–∏–ª–∏ -->
						<!-- –ï—Å–ª–∏ –∫–æ–ª-–≤–æ –ª–∞–π–∫–æ–≤ –±–æ–ª—å—à–µ 1, —Ç–æ –æ–Ω–∏ –ø–µ—Ä–µ—á–∏—Å–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é -->
						<p>–ù—Ä–∞–≤–∏—Ç—Å—è: {% for user in post.likes.all %}{% if post.likes.all.count > 1 %}{{ user }}, {% else %}{{ user }}{% endif %}{% endfor %}</p>
						{% if request.user.is_authenticated %}
							<form class="" action="{% url 'like_post' post.pk %}" method="post">
								{% csrf_token %}
								<button class="btn" type="submit" name="post_id" value="{{ post.id }}">{% if not request.user in post.likes.all %}‚ù§{% else %}üíî{% endif %}</button>
							</form>
						{% endif %}
						{% if post.edited != post.created %}
						  <p>–ò–∑–º–µ–Ω–µ–Ω–æ: {{ post.edited }}</p>
						{% endif %}
						<p>–û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ: {{ post.created }}</p>
						<p>–ê–≤—Ç–æ—Ä: <a href="{% url 'profile_page' post.author.profile.pk %}">{{ post.author }}</a></p>
						{% for comment in comments %}
							{% if comment.post == post %}
								<div class="comment">
									<h4>{{ comment.user }}</h4>
									<p>{{ comment.text }}</p>
								</div>
							{% endif %}
						{% endfor %}
						{% if request.user.is_authenticated %}
							<form class="ur-comment" action="{% url 'add_comment' post.pk %}" method="post">
								{% csrf_token %}
								{{ AddCommentForm.as_p }}
								<button class="btn" type="submit" name="post_comment_id" value="{{ post.id }}">–î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</button>
							</form>
							{% if request.user == post.author %}
							  <p><a href="{% url 'post_edit_page' post.id %}">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a></p>
								<p><a class="danger" href="{% url 'post_delete_page' post.id %}">–£–¥–∞–ª–∏—Ç—å</a></p>
							{% endif %}
						{% else %}
							<p><a href="{% url 'login' %}">–ê–≤—Ç–æ—Ä–∏–∑–∏—Ä—É–π—Ç–µ—Å—å</a>, —á—Ç–æ–±—ã –∏–º–µ—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Å—Ç–∞–≤–ª—è—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏.</p>
						{% endif %}
					</div>
				{% endfor %}
			</div>
			<div class="post-create">
				{% if request.user.is_authenticated %}
					<form class="" action="{% url 'index_page' %}" method="post">
						{% csrf_token %}
						{{ PostForm.as_p }}
						<button class="btn" type="submit" name="button">–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å</button>
					</form>
				{% else %}
					<p>–¢—É—Ç, –∫–∞–∂–µ—Ç—Å—è, —á—Ç–æ-—Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å...</p>
				{% endif %}
			</div>
		</div>
		<div class="pagination">
			<span class="step-links">
				{% if page_obj.has_previous %}
				  <a href="?page=1">&laquo; –ù–∞—á–∞–ª—å–Ω–∞—è</a>
					<a href="?page={{ page_obj.previous_page_number }}">–ü—Ä–µ–¥—ã–¥—É—â–∞—è</a>
				{% endif %}

				<span class="current">
					–°—Ç—Ä–∞–Ω–∏—Ü–∞ {{ page_obj.number }} –∏–∑ {{ page_obj.paginator.num_pages }}
				</span>

				{% if page_obj.has_next %}
				  <a href="?page={{ page_obj.next_page_number }}">–°–ª–µ–¥—É—é—â–∞—è</a>
					<a href="?page={{ page_obj.paginator.num_pages }}">–ü–æ—Å–ª–µ–¥–Ω—è—è &raquo;</a>
				{% endif %}
			</span>
		</div>
	</div>

{% include 'blocks/footer.html' %}
</body>
</html>
